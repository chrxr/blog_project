{% extends "base.html" %}

{% load static wagtailcore_tags wagtailimages_tags static %}

{% block body_class %}templage-blogpage{% endblock %}

{% block content %}
    <article class='content-container'>
        <h1 class='blog-title'>{{ self.title }}</h1>
        {% if self.subtitle %}
            <h3 class='subtitle'>{{ self.subtitle }}</h3>
        {% endif %}
        <p class="meta">{{ self.date }}</p>

        {% if self.main_image %}
          {% image self.main_image width-400 %}
        {% endif %}

        <div class="intro"><p>{{ self.intro }}</p></div>

        {% for block in self.body %}
            {% if block.block_type == 'heading' %}
                <h3>{{ block.value }}</h3>
            {% elif block.block_type == 'codeblock' %}
                <pre class='codeblock'>
                    {{ block.value }}
                </pre>
            {% else %}
                {{ block }}
            {% endif %}
        {% endfor %}
        {% for tag in self.tags.all %}
            <a class='tag' href="{% pageurl self.home_page %}?tag={{ tag }}">{{ tag }}</a>
        {% endfor %}
    </article>
    <!-- {{site_root}} -->
{% endblock %}